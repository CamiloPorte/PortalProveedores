{% extends "untitled.html" %}
{% block body %}
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Caminos</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <!-- Bootstrap CSS-->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <!-- Google fonts - Roboto -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,700">
  <!-- theme stylesheet-->
  <link rel="stylesheet" href="css/style.default.css" id="theme-stylesheet">
  <!-- Custom stylesheet - for your changes-->
  <link rel="stylesheet" href="css/custom.css">
  <!-- Favicon-->
  <link rel="shortcut icon" href="img/favicon.ico">
  <!-- Font Awesome CDN-->
  <!-- you can replace it by local Font Awesome-->
  <script src="https://use.fontawesome.com/99347ac47f.js"></script>
  <!-- Font Icons CSS-->
  <link rel="stylesheet" href="https://file.myfontastic.com/da58YPMQ7U5HY8Rb6UxkNf/icons.css">
  <!-- Tweaks for older IEs-->
  <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>

<body onload="update_values();">
  <div class="page charts-page">
    <!-- Page Header-->
    <header class="page-header">
      <div class="container-fluid">
        <h2 class="no-margin-bottom">Caminos</h2>
      </div>
    </header>
    <br>
    <div class="container-fluid">
      <div class="progress">
        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75"
          aria-valuemin="0" aria-valuemax="100" style="width: 75%">{{contador}}</div>
      </div>
    </div>
    <!-- Breadcrumb-->
    <section class="tables">
      <div class="container-fluid">
        <div class="row">
          {%for j in range(((matriz|length)/8)|int +1 )%}
          <div class="col-lg-6">
            <div class="card">
              <div class="card-header d-flex align-items-center">
                <h3 class="h4">Caminos</h3>
              </div>
              <div class="card-body">
                <table class="table" id="myTable">
                  <thead>
                    <tr>
                      <th>Identificación de camino</th>
                      <th>Acción</th>
                      <th>Estado</th>
                      <th>Fecha y hora</th>
                      <th>Progreso</th>
                    </tr>
                  </thead>
                  <tbody id="myTable-tbody">
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          {%endfor%}
        </div>
    </section>
  </div>
  <button onclick="stopRefresh();">Stop</button>
  <button onclick="startRefresh();">Start</button>
  <!-- Javascript files-->
  <script type="text/javascript">
    var intervalID = setInterval(update_values, 5000);
    function update_values() {
      $.getJSON($SCRIPT_ROOT + '/procesos',
        function (data) {
          $('#matriz').text(data.matriz);
          console.log(data);
          $('#myTable-tbody tr').remove();                    
          tableCreate(data);
        });
    };
    function stopRefresh() {
      clearInterval(intervalID);
    }
    function startRefresh() {
      intervalID = setInterval(update_values, 5000);
    }
    function tableCreate(data) {
      var table = document.getElementById('myTable').getElementsByTagName('tbody')[0];      
      for (let rows = 0; rows < 6; rows++) {
        var row = table.insertRow();
      for (let columns = 0; columns < 4; columns++) {
        var cell = row.insertCell(columns);
        cell.innerHTML = data.matriz[rows][columns];
      }
     }
    }
    function deleteTable() {
      if (confirm("It will be deleted..!!")) {
        document.getElementById("myTable").deleteRow();
      }
    }          
  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="js/tether.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.cookie.js"> </script>
  <script src="js/jquery.validate.min.js"></script>
  <script src="js/front.js"></script>
  <!-- Google Analytics: change UA-XXXXX-X to be your site's ID.-->
  <!---->
  <script>
    (function (b, o, i, l, e, r) {
    b.GoogleAnalyticsObject = l; b[l] || (b[l] =
      function () { (b[l].q = b[l].q || []).push(arguments) }); b[l].l = +new Date;
      e = o.createElement(i); r = o.getElementsByTagName(i)[0];
      e.src = '//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e, r)
    }(window, document, 'script', 'ga'));
    ga('create', 'UA-XXXXX-X'); ga('send', 'pageview');

  </script>
</body>

</html>
{% endblock %}